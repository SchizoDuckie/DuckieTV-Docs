<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>DuckieTV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" type="text/css">
    <link rel="stylesheet" href="../../css/bootstrap.css">
    <link rel="stylesheet" href="../../css/cayman.css">
    <link rel="stylesheet" href="../../css/prism.css">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">DuckieTV</h1>
      <h2 class="project-tagline">DuckieTV helps you manage your favorite TV Shows on a sweet calendar</h2><a href="https://npmjs.com/package/DuckieTV-Standalone" target="_blank" class="btn">View on npm</a>
    </section>
    <section data-spy="scroll" data-target=".scrollspy" class="main-content">
      <div class="row">
        <div class="col-md-3 col-xs-3 bs-docs-sidebar">
          <ul id="sidebar" class="nav nav-stacked fixed">
            <li><a href="../../index.html">Main</a></li>
            <li><a href="../../CRUD.entities.js.html">CRUD.entities.js</a></li>
            <li><a href="../../app.authHttpBackend.js.html">app.authHttpBackend.js</a></li>
            <li><a href="../../app.js.html">app.js</a></li>
            <li><a href="../../app.requestinterceptors.js.html">app.requestinterceptors.js</a></li>
            <li><a href="../../app.routes.js.html">app.routes.js</a></li>
            <li><a href="../../app.standalone.systray.js.html">app.standalone.systray.js</a></li>
            <li><a href="../../app.standalone.update.js.html">app.standalone.update.js</a></li>
            <li><a href="../../app.standalone.windowdressing.js.html">app.standalone.windowdressing.js</a></li>
            <li><a href="../../app.standalone.zoom.js.html">app.standalone.zoom.js</a></li>
            <li><a href="../../app.translate.js.html">app.translate.js</a></li>
            <li><a href="../../background.js.html">background.js</a></li>
            <li><a href="../../classes/RemoteAPI.js.html">classes/RemoteAPI.js</a></li>
            <li><a href="../../controllers/ActionBarCtrl.js.html">controllers/ActionBarCtrl.js</a></li>
            <li><a href="../../controllers/WatchlistCtrl.js.html">controllers/WatchlistCtrl.js</a></li>
            <li><a href="../../controllers/serieslist/LocalSeriesCtrl.js.html">controllers/serieslist/LocalSeriesCtrl.js</a></li>
            <li><a href="../../controllers/serieslist/SeriesListCtrl.js.html">controllers/serieslist/SeriesListCtrl.js</a></li>
            <li><a href="../../controllers/serieslist/TraktTVSearchCtrl.js.html">controllers/serieslist/TraktTVSearchCtrl.js</a></li>
            <li><a href="../../controllers/serieslist/TraktTVTrendingCtrl.js.html">controllers/serieslist/TraktTVTrendingCtrl.js</a></li>
            <li><a href="../../controllers/settings/BackupCtrl.js.html">controllers/settings/BackupCtrl.js</a></li>
            <li><a href="../../controllers/settings/CalendarCtrl.js.html">controllers/settings/CalendarCtrl.js</a></li>
            <li><a href="../../controllers/settings/DisplayCtrl.js.html">controllers/settings/DisplayCtrl.js</a></li>
            <li><a href="../../controllers/settings/LanguageCtrl.js.html">controllers/settings/LanguageCtrl.js</a></li>
            <li><a href="../../controllers/settings/SerieTorrentSettingsCtrl.js.html">controllers/settings/SerieTorrentSettingsCtrl.js</a></li>
            <li><a href="../../controllers/settings/SettingsTorrentCtrl.js.html">controllers/settings/SettingsTorrentCtrl.js</a></li>
            <li><a href="../../controllers/settings/SubtitlesCtrl.js.html">controllers/settings/SubtitlesCtrl.js</a></li>
            <li><a href="../../controllers/settings/SyncCtrl.js.html">controllers/settings/SyncCtrl.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/Deluge.js.html">controllers/settings/TorrentClients/Deluge.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/Tixati.js.html">controllers/settings/TorrentClients/Tixati.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/Transmission.js.html">controllers/settings/TorrentClients/Transmission.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/Vuze.js.html">controllers/settings/TorrentClients/Vuze.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/qBittorrent.js.html">controllers/settings/TorrentClients/qBittorrent.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/qBittorrent32plus.js.html">controllers/settings/TorrentClients/qBittorrent32plus.js</a></li>
            <li><a href="../../controllers/settings/TorrentClients/uTorrentWebUI.js.html">controllers/settings/TorrentClients/uTorrentWebUI.js</a></li>
            <li><a href="../../controllers/settings/TraktTVCtrl.js.html">controllers/settings/TraktTVCtrl.js</a></li>
            <li><a href="../../controllers/settings/customSearchEngineCtrl.js.html">controllers/settings/customSearchEngineCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/AboutCtrl.js.html">controllers/sidepanel/AboutCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/SettingsCtrl.js.html">controllers/sidepanel/SettingsCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/SidepanelEpisodeCtrl.js.html">controllers/sidepanel/SidepanelEpisodeCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/SidepanelSeasonCtrl.js.html">controllers/sidepanel/SidepanelSeasonCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/SidepanelSeasonsCtrl.js.html">controllers/sidepanel/SidepanelSeasonsCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/SidepanelSerieCtrl.js.html">controllers/sidepanel/SidepanelSerieCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/SidepanelTraktSerieCtrl.js.html">controllers/sidepanel/SidepanelTraktSerieCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/TorrentCtrl.js.html">controllers/sidepanel/TorrentCtrl.js</a></li>
            <li><a href="../../controllers/sidepanel/TorrentDetailsCtrl.js.html">controllers/sidepanel/TorrentDetailsCtrl.js</a></li>
            <li><a href="../../directives/backgroundRotator.js.html">directives/backgroundRotator.js</a></li>
            <li><a href="../../directives/calendar.js.html">directives/calendar.js</a></li>
            <li><a href="../../directives/calendarEvent.js.html">directives/calendarEvent.js</a></li>
            <li><a href="../../directives/chromeTopSites.js.html">directives/chromeTopSites.js</a></li>
            <li><a href="../../directives/datePicker.js.html">directives/datePicker.js</a></li>
            <li><a href="../../directives/episodeDownloaded.js.html">directives/episodeDownloaded.js</a></li>
            <li><a href="../../directives/episodeWatched.js.html">directives/episodeWatched.js</a></li>
            <li><a href="../../directives/fastSearch.js.html">directives/fastSearch.js</a></li>
            <li><a href="../../directives/focusWatch.js.html">directives/focusWatch.js</a></li>
            <li><a href="../../directives/lazyBackground.js.html">directives/lazyBackground.js</a></li>
            <li><a href="../../directives/loadingSpinner.js.html">directives/loadingSpinner.js</a></li>
            <li><a href="../../directives/mouseWheelDown.js.html">directives/mouseWheelDown.js</a></li>
            <li><a href="../../directives/mouseWheelUp.js.html">directives/mouseWheelUp.js</a></li>
            <li><a href="../../directives/queryMonitor.js.html">directives/queryMonitor.js</a></li>
            <li><a href="../../directives/serieDetails.js.html">directives/serieDetails.js</a></li>
            <li><a href="../../directives/serieheader.js.html">directives/serieheader.js</a></li>
            <li><a href="../../directives/seriesList.js.html">directives/seriesList.js</a></li>
            <li><a href="../../directives/sidePanel.js.html">directives/sidePanel.js</a></li>
            <li><a href="../../directives/stopEvent.js.html">directives/stopEvent.js</a></li>
            <li><a href="../../directives/subtitleDialog.js.html">directives/subtitleDialog.js</a></li>
            <li><a href="../../directives/targetBlank.js.html">directives/targetBlank.js</a></li>
            <li><a href="../../directives/torrentDialog.js.html">directives/torrentDialog.js</a></li>
            <li><a href="../../directives/torrentRemoteControl.js.html">directives/torrentRemoteControl.js</a></li>
            <li><a href="../../services/AutoDownloadService.js.html">services/AutoDownloadService.js</a></li>
            <li><a href="../../services/BaseHTTPApi.js.html">services/BaseHTTPApi.js</a></li>
            <li><a href="../../services/CalendarEvents.js.html">services/CalendarEvents.js</a></li>
            <li><a href="../../services/ChromeStorageSyncTarget.js.html">services/ChromeStorageSyncTarget.js</a></li>
            <li><a href="../../services/DuckieTorrent.js.html">services/DuckieTorrent.js</a></li>
            <li><a href="../../services/EpisodeWatchedMonitor.js.html">services/EpisodeWatchedMonitor.js</a></li>
            <li><a href="../../services/FavoritesService.js.html">services/FavoritesService.js</a></li>
            <li><a href="../../services/FileReader.js.html">services/FileReader.js</a></li>
            <li><a href="../../services/FormlyLoaderService.js.html">services/FormlyLoaderService.js</a></li>
            <li><a href="../../services/GoogleImages.js.html">services/GoogleImages.js</a></li>
            <li><a href="../../services/IMDB.js.html">services/IMDB.js</a></li>
            <li><a href="../../services/MigrationService.js.html">services/MigrationService.js</a></li>
            <li><a href="../../services/Netflix.js.html">services/Netflix.js</a></li>
            <li><a href="../../services/NotificationService.js.html">services/NotificationService.js</a></li>
            <li><a href="../../services/OpenSubtitles.js.html">services/OpenSubtitles.js</a></li>
            <li><a href="../../services/PowderPlayer.js.html">services/PowderPlayer.js</a></li>
            <li><a href="../../services/SceneNameResolver.js.html">services/SceneNameResolver.js</a></li>
            <li><a href="../../services/SceneXemResolver.js.html">services/SceneXemResolver.js</a></li>
            <li><a href="../../services/SettingsService.js.html">services/SettingsService.js</a></li>
            <li><a href="../../services/StorageSyncService.js.html">services/StorageSyncService.js</a></li>
            <li><a href="../../services/SyncManager.js.html">services/SyncManager.js</a></li>
            <li><a href="../../services/TorrentClients/BaseTorrentClient.js.html">services/TorrentClients/BaseTorrentClient.js</a></li>
            <li><a href="../../services/TorrentClients/Deluge.js.html">services/TorrentClients/Deluge.js</a></li>
            <li><a href="../../services/TorrentClients/Tixati.js.html">services/TorrentClients/Tixati.js</a></li>
            <li><a href="../../services/TorrentClients/TorrentData.js.html">services/TorrentClients/TorrentData.js</a></li>
            <li><a href="../../services/TorrentClients/Transmission.js.html">services/TorrentClients/Transmission.js</a></li>
            <li><a href="../../services/TorrentClients/Vuze.js.html">services/TorrentClients/Vuze.js</a></li>
            <li><a href="../../services/TorrentClients/qBittorrent.js.html">services/TorrentClients/qBittorrent.js</a></li>
            <li><a href="../../services/TorrentClients/qBittorrent32plus.js.html">services/TorrentClients/qBittorrent32plus.js</a></li>
            <li><a href="../../services/TorrentClients/uTorrent.js.html">services/TorrentClients/uTorrent.js</a></li>
            <li class="active"><a href="../../services/TorrentClients/uTorrentWebUI.js.html">services/TorrentClients/uTorrentWebUI.js
                <ul class="nav nav-stacked">
                  <li><a href="#getUrl"><i class="alert alert-info"></i><span>getUrl</span></a>
                  </li>
                </ul></a></li>
            <li><a href="../../services/TorrentFreak.js.html">services/TorrentFreak.js</a></li>
            <li><a href="../../services/TorrentHashListService.js.html">services/TorrentHashListService.js</a></li>
            <li><a href="../../services/TorrentMonitor.js.html">services/TorrentMonitor.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/GenericTorrentSearchEngine.js.html">services/TorrentSearchEngines/GenericTorrentSearchEngine.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/Kickass.js.html">services/TorrentSearchEngines/Kickass.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/KickassMirrorResolver.js.html">services/TorrentSearchEngines/KickassMirrorResolver.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/Nyaa.js.html">services/TorrentSearchEngines/Nyaa.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/RarBG.js.html">services/TorrentSearchEngines/RarBG.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/ShowRSS.js.html">services/TorrentSearchEngines/ShowRSS.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/Strike.js.html">services/TorrentSearchEngines/Strike.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/ThePirateBay.js.html">services/TorrentSearchEngines/ThePirateBay.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/ThePirateBayMirrorResolver.js.html">services/TorrentSearchEngines/ThePirateBayMirrorResolver.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/TorrentSearchEngines.js.html">services/TorrentSearchEngines/TorrentSearchEngines.js</a></li>
            <li><a href="../../services/TorrentSearchEngines/Torrentz.eu.js.html">services/TorrentSearchEngines/Torrentz.eu.js</a></li>
            <li><a href="../../services/TraktTVStorageSyncTarget.js.html">services/TraktTVStorageSyncTarget.js</a></li>
            <li><a href="../../services/TraktTVTrending.js.html">services/TraktTVTrending.js</a></li>
            <li><a href="../../services/TraktTVUpdateService.js.html">services/TraktTVUpdateService.js</a></li>
            <li><a href="../../services/TraktTVv2.js.html">services/TraktTVv2.js</a></li>
            <li><a href="../../services/UpgradeNotificationService.js.html">services/UpgradeNotificationService.js</a></li>
            <li><a href="../../services/WatchlistCheckerService.js.html">services/WatchlistCheckerService.js</a></li>
            <li><a href="../../services/WatchlistService.js.html">services/WatchlistService.js</a></li>
            <li><a href="../../utility.js.html">utility.js</a></li>
          </ul>
        </div>
        <div class="col-md-9">
          <div class="description"><p>uTorrentWebUI</p></div>
          <pre><code class="language-javascript">uTorrentWebUIData = function(data) {
    this.update(data);
};

uTorrentWebUIData.extends(TorrentData, {
    getName: function() {
        return this.name;
    },
    getProgress: function() {
        return this.round(this.progress / 10, 1);
    },
    start: function() {
        this.getClient().getAPI().execute('start', this.hash);
    },
    stop: function() {
        this.getClient().getAPI().execute('stop', this.hash);
    },
    pause: function() {
        this.getClient().getAPI().execute('pause', this.hash);
    },
    getFiles: function() {
        return this.getClient().getAPI().getFiles(this.hash).then(function(results) {
            this.files = results;
            return results;
        }.bind(this));
    },
    isStarted: function() {
        return this.status % 2 === 1;
    }
});</code></pre>
          <div class="description"><p>uTorrentWebUI &lt; 3.2 client</p></div>
          <pre><code class="language-javascript">DuckieTorrent.factory('uTorrentWebUIRemote', [&quot;BaseTorrentRemote&quot;,
    function(BaseTorrentRemote) {

        var uTorrentWebUIRemote = function() {
            BaseTorrentRemote.call(this);
            this.dataClass = uTorrentWebUIData;
        };
        uTorrentWebUIRemote.extends(BaseTorrentRemote);

        return uTorrentWebUIRemote;
    }
])

.factory('uTorrentWebUIAPI', ['BaseHTTPApi', '$http', '$q',
    function(BaseHTTPApi, $http, $q) {

        var uTorrentWebUIAPI = function() {
            BaseHTTPApi.call(this);
            this.config.token = '';
        };
        uTorrentWebUIAPI.extends(BaseHTTPApi, {</code></pre>
          <section id="getUrl">
            <h1>getUrl</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-info radius ctx-type">method</div><span>&nbsp;</span><span>getUrl()</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>Fetches the url, auto-replaces the port in the url if it was found.</p></div>
          <pre><code class="language-javascript">getUrl: function(type, param) {
    var out = this.config.server + ':' + this.config.port + this.endpoints[type];
    if (this.config.use_auth) {
        out = out.replace('://', '://' + this.config.username + ':' + this.config.password + '@');
    }
    if (out.indexOf('%token%') &gt; -1) {
        out = out.replace('%token%', this.config.token);
    }
    return (param) ? out.replace('%s', encodeURIComponent(param)) : out;
},

portscan: function() {
    var self = this;
    return this.request('portscan').then(function(result) {
        if (result !== undefined) {
            var token = new HTMLScraper(result.data).querySelector('#token').innerHTML;
            if (token) {
                self.config.token = token;
            }
            return true;
        }
        return false;
    }, function() {
        return false;
    });
},
getTorrents: function() {
    return this.request('torrents').then(function(data) {
        return data.data.torrents.map(function(torrent) {
            return {
                hash: torrent[0],
                status: torrent[1],
                name: torrent[2],
                size: torrent[3],
                progress: torrent[4],
                downloaded: torrent[5],
                uploaded: torrent[6],
                ratio: torrent[7],
                upload_speed: torrent[8],
                download_speed: torrent[9],
                eta: torrent[10],
                label: torrent[11],
                peers_connected: torrent[12],
                peers_in_swarm: torrent[13],
                seeds_connected: torrent[14],
                seeds_in_swarm: torrent[15],
                availability: torrent[16],
                torrent_queue_order: torrent[17],
                remaining: torrent[18],
                download_url: torrent[19],
                rss_feed_url: torrent[20],
                status_message: torrent[21],
                stream_id: torrent[22],
                added_on: torrent[23],
                completed_on: torrent[24],
                app_update_url: torrent[25]
            };
        });
    });
},
getFiles: function(hash) {
    return this.request('files', hash).then(function(data) {
        //debugger;
        return data.data.files[1].map(function(file) {
            return {
                name: file[0],
                filesize: file[1],
                downloaded: file[2],
                priority: file[3],
                firstpiece: file[4],
                num_pieces: file[5],
                streamable: file[6],
                encoded_rate: file[7],
                duration: file[8],
                width: file[9],
                height: file[10],
                stream_eta: file[11],
                streamability: file[12]
            };
        });
    });
},
addMagnet: function(magnetHash) {
    var headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
    };
    if (this.config.use_auth) {
        headers.Authorization = [this.config.username, this.config.password];
    }
    return $http.post(this.getUrl('addmagnet', magnetHash), {
        headers: headers
    });
},
addTorrentByUpload: function(data, filename) {
    var self = this;
    var headers = {
        'Content-Type': undefined
    };
    if (this.config.use_auth) {
        headers.Authorization = [this.config.username, this.config.password];
    }
    var fd = new FormData();
    fd.append('torrent_file', data, filename + '.torrent');

    return $http.post(this.getUrl('addfile'), fd, {
        transformRequest: angular.identity,
        headers: headers
    }).then(function(result) {
        var currentTry = 0;
        var maxTries = 5;
        // wait for qBittorrent to add the torrent to the list. we poll 5 times until we find it, otherwise abort.
        return $q(function(resolve, reject) {
            function verifyAdded() {
                currentTry++;
                self.getTorrents().then(function(result) {
                    var hash = null;
                    result.map(function(torrent) {
                        if (torrent.name == filename) {
                            hash = torrent.hash.toUpperCase();
                        }
                    });
                    if (hash !== null) {
                        resolve(hash);
                    } else {
                        if (currentTry &lt; maxTries) {
                            setTimeout(verifyAdded, 1000);
                        } else {
                            throw &quot;No hash foudn for torrent &quot; + filename + &quot; in 5 tries.&quot;;
                        }
                    }
                });
            }
            setTimeout(verifyAdded, 1000);
        });

    }.bind(this));

},
execute: function(method, id) {
    var headers = {
        'Content-Type': 'application/x-www-form-urlencoded',
    };
    if (this.config.use_auth) {
        headers.Authorization = [this.config.username, this.config.password];
    }
    return $http.post(this.getUrl(method, id), {
        headers: headers
    });
}
        });

        return uTorrentWebUIAPI;
    }
])

.factory('uTorrentWebUI', [&quot;BaseTorrentClient&quot;, &quot;uTorrentWebUIRemote&quot;, &quot;uTorrentWebUIAPI&quot;,
    function(BaseTorrentClient, uTorrentWebUIRemote, uTorrentWebUIAPI) {

        var uTorrentWebUI = function() {
BaseTorrentClient.call(this);
        };
        uTorrentWebUI.extends(BaseTorrentClient, {});

        var service = new uTorrentWebUI();
        service.setName('uTorrent Web UI');
        service.setAPI(new uTorrentWebUIAPI());
        service.setRemote(new uTorrentWebUIRemote());
        service.setConfigMappings({
server: 'utorrentwebui.server',
port: 'utorrentwebui.port',
username: 'utorrentwebui.username',
password: 'utorrentwebui.password',
use_auth: 'utorrentwebui.use_auth'
        });
        service.setEndpoints({
portscan: '/gui/token.html',
torrents: '/gui/?token=%token%&amp;list=1',
addmagnet: '/gui/?token=%token%&amp;action=add-url&amp;s=%s',
addfile: '/gui/?token=%token%&amp;action=add-file&amp;download_dir=0&amp;path=',
stop: '/gui/?token=%token%&amp;action=stop&amp;hash=%s',
resume: '/gui/?token=%token%&amp;action=start&amp;hash=%s',
pause: '/gui/?token=%token%&amp;action=pause&amp;hash=%s',
files: '/gui/?token=%token%&amp;action=getfiles&amp;hash=%s',
        });
        service.readConfig();

        return service;
    }
])

.run([&quot;DuckieTorrent&quot;, &quot;uTorrentWebUI&quot;, &quot;SettingsService&quot;,
    function(DuckieTorrent, uTorrentWebUI, SettingsService) {
        if (SettingsService.get('torrenting.enabled')) {
DuckieTorrent.register('uTorrent Web UI', uTorrentWebUI);
        }
    }
]);</code></pre>
          <div class="footer site-footer">
            <div class="span site-footer-owner"><a href="https://github.com/mr-doc/mr-doc-theme-cayman">Cayman</a> is maintained by <a href="https://github.com/iwatakeshi">iwatakeshi</a>.</div>
            <div class="span site-footer-credits">This page was generated by <a href="https://github.com/mr-doc/mr-doc">Mr. Doc</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</div>
          </div>
        </div>
      </div>
    </section>
    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/affix.js"></script>
    <script src="../../js/dropdown.js"></script>
    <script src="../../js/scrollspy.js"></script>
    <script src="../../js/prism.js"></script>
    <script src="../../js/prism-bash.js"></script>
    <script>
      $(document).ready(function(){
        $('body').scrollspy({
          target: ".bs-docs-sidebar",
          offset: 40
        });
        $('#sidebar').affix({
          offset:{
            bottom:60,
            top: 60
          }
        }) 
      });
    </script>
  </body>
</html>